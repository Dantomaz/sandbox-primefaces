<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="jakarta.faces.core"
      xmlns:h="jakarta.faces.html"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Tree Table</title>
</h:head>

<h:body>
    <div>
        <h:form id="config-form">
            <p:treeTable
                id="config-tree"
                value="#{homeScope.root}"
                var="item"
                selection="#{homeScope.currentlySelectedItems}"
                selectionMode="checkbox"
                showUnselectableCheckbox="true"
                sortBy="#{homeScope.sortBy}"
                sortMode="single"
                allowUnsorting="true"
            >
                <p:column headerText="#{homeScope.TITLE}" sortBy="#{item.name}">
                    <h:outputText value="#{item.name}"/>
                </p:column>

                <p:ajax event="select" listener="#{homeScope.onNodeSelect}" update="config-tree"/>
                <p:ajax event="unselect" listener="#{homeScope.onNodeUnselect}" update="config-tree"/>
            </p:treeTable>
        </h:form>
    </div>
</h:body>
</html>